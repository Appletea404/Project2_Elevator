#include <delay.h>

void delay_us1(uint16_t us)
{
    uint16_t start = __HAL_TIM_GET_COUNTER(&htim11);
    while ((uint16_t)(__HAL_TIM_GET_COUNTER(&htim11) - start) < us);
}
